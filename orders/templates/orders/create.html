{%extends 'main/base.html'%}
{%load static%}

{%block title%}Checkout{%endblock%}
{%block link%}
<link type="text/css" href="{% static 'orders/css/create.css' %}" rel="stylesheet">
{%endblock%}

{%block content%}
<div class="checkout-wrapper">
    <div class="checkout-container">
        <!-- Checkout Form -->
        <div class="checkout-form">
            <!-- Shipping Information -->
            <div class="form-section">
                <div class="section-header">
                    <i class='bx bx-map section-icon'></i>
                    <h2 class="section-title">Shipping Information</h2>
                </div>

                <form method="post" id="checkoutForm">
                    {%csrf_token%}
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">First Name <span class="required">*</span></label>
                            {{form.first_name}}
                        </div>
                        <div class="form-group">
                            <label class="form-label">Last Name <span class="required">*</span></label>
                            {{form.last_name}}
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Email Address <span class="required">*</span></label>
                        {{form.email}}
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Street Address <span class="required">*</span></label>
                        {{form.address1}}
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">City <span class="required">*</span></label>
                            {{form.city}}
                        </div>
                        <div class="form-group">
                            <label class="form-label">Postal Code <span class="required">*</span></label>
                            {{form.postal_code}}
                        </div>
                    </div>

                    <div class="form-grid">
                        <!--                        <div class="form-group">-->
                        <!--                            <label class="form-label">Country <span class="required">*</span></label>-->
                        <!--                            <select class="form-input" id="country" required>-->
                        <!--                                <option value="">Select Country</option>-->
                        <!--                                <option value="US">United States</option>-->
                        <!--                                <option value="CA">Canada</option>-->
                        <!--                                <option value="UK">United Kingdom</option>-->
                        <!--                                <option value="DE">Germany</option>-->
                        <!--                                <option value="FR">France</option>-->
                        <!--                            </select>-->
                        <!--                        </div>-->
                        <div class="form-group">
                            <label class="form-label">Phone Number <span class="required">*</span></label>
                            {{form.phone}}
                        </div>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="saveInfo">
                        <label for="saveInfo">Save this information for future orders</label>
                    </div>
                </form>
            </div>

            <!-- Payment Method -->
            <div class="form-section">
                <div class="section-header">
                    <i class='bx bx-credit-card section-icon'></i>
                    <h2 class="section-title">Payment Method</h2>
                </div>

                <div class="payment-methods">
                    <div class="payment-option">
                        <input type="radio" class="payment-radio" id="creditCard" name="payment" value="creditCard"
                               checked>
                        <label class="payment-label" for="creditCard">
                            <i class='bx bx-credit-card payment-icon'></i>
                            <div class="payment-info">
                                <h4>Credit/Debit Card</h4>
                                <p>Visa, Mastercard, American Express</p>
                            </div>
                        </label>
                    </div>
                    <!--                    <div class="payment-option">-->
                    <!--                        <input type="radio" class="payment-radio" id="paypal" name="payment" value="paypal">-->
                    <!--                        <label class="payment-label" for="paypal">-->
                    <!--                            <i class='bx bxl-paypal payment-icon'></i>-->
                    <!--                            <div class="payment-info">-->
                    <!--                                <h4>PayPal</h4>-->
                    <!--                                <p>Pay with your PayPal account</p>-->
                    <!--                            </div>-->
                    <!--                        </label>-->
                    <!--                    </div>-->

                    <!--                    <div class="payment-option">-->
                    <!--                        <input type="radio" class="payment-radio" id="applePay" name="payment" value="applePay">-->
                    <!--                        <label class="payment-label" for="applePay">-->
                    <!--                            <i class='bx bxl-apple payment-icon'></i>-->
                    <!--                            <div class="payment-info">-->
                    <!--                                <h4>Apple Pay</h4>-->
                    <!--                                <p>Touch ID or Face ID</p>-->
                    <!--                            </div>-->
                    <!--                        </label>-->
                    <!--                    </div>-->
                </div>

                <!-- Credit Card Form -->
                <!--                <div class="card-form" id="cardForm">-->
                <!--                    <div class="form-group">-->
                <!--                        <label class="form-label">Card Number <span class="required">*</span></label>-->
                <!--                        <input type="text" class="form-input" id="cardNumber" placeholder="1234 5678 9012 3456"-->
                <!--                               maxlength="19">-->
                <!--                    </div>-->

                <!--                    <div class="form-grid">-->
                <!--                        <div class="form-group">-->
                <!--                            <label class="form-label">Expiry Date <span class="required">*</span></label>-->
                <!--                            <input type="text" class="form-input" id="expiryDate" placeholder="MM/YY" maxlength="5">-->
                <!--                        </div>-->
                <!--                        <div class="form-group">-->
                <!--                            <label class="form-label">CVV <span class="required">*</span></label>-->
                <!--                            <input type="text" class="form-input" id="cvv" placeholder="123" maxlength="4">-->
                <!--                        </div>-->
                <!--                    </div>-->

                <!--                    <div class="form-group">-->
                <!--                        <label class="form-label">Cardholder Name <span class="required">*</span></label>-->
                <!--                        <input type="text" class="form-input" id="cardName" placeholder="John Doe">-->
                <!--                    </div>-->
                <!--                </div>-->
            </div>
        </div>

        <!-- Order Summary -->
        <div class="order-summary">
            <div class="summary-header">
                <i class='bx bx-receipt section-icon'></i>
                <h2 class="summary-title">Order Summary</h2>
            </div>

            <div class="order-items">
                {%for item in cart%}
                <div class="order-item">
                    <div class="item-image">
                        <img src="{{item.image.url}}">
                        <i class='bx bx-closet' style="font-size: 20px; color: #1d503a;"></i>
                    </div>
                    <div class="item-details">
                        <div class="item-name">{{item.product.name}}</div>
                        <div class="item-specs">Size: {{item.size.name}}</div>
                        <div class="item-price-row">
                            <span class="item-quantity">Quan: {{item.quantity}}</span>
                            <span class="item-price">${{item.price}}</span>
                        </div>
                    </div>
                </div>
                {%endfor%}
            </div>

            <!-- Promo Code -->
            <div class="promo-section">
                <div class="promo-title">Have a promo code?</div>
                <div class="promo-input-group">
                    <input type="text" class="promo-input" id="promoCode" placeholder="Enter code">
                    <button class="promo-btn" onclick="applyPromo()">Apply</button>
                </div>
            </div>

            <!-- Order Breakdown -->
            <div class="order-breakdown">
                <div class="breakdown-row">
                    <span>Subtotal:</span>
                    <span>${{cart.get_total_price}}</span>
                </div>
                <!--                <div class="breakdown-row">-->
                <!--                    <span>Shipping:</span>-->
                <!--                    <span>$9.99</span>-->
                <!--                </div>-->
                <!--                <div class="breakdown-row">-->
                <!--                    <span>Tax:</span>-->
                <!--                    <span>$27.20</span>-->
                <!--                </div>-->
                <div class="breakdown-row total">
                    <span>Total:</span>
                    <span id="totalAmount">${{cart.get_total_price}}</span>
                </div>
            </div>

            <!-- Place Order Button -->
            <button type="submit" class="place-order-btn0" form="checkoutForm">
                <i class='bx bx-lock-alt'></i>
                Place Secure Order
            </button>

            <!-- Security Badges -->
            <div class="security-badges">
                <div class="security-badge">
                    <i class='bx bx-shield-check'></i>
                    <span>SSL Secured</span>
                </div>
                <div class="security-badge">
                    <i class='bx bx-refresh'></i>
                    <span>30-Day Returns</span>
                </div>
                <div class="security-badge">
                    <i class='bx bx-support'></i>
                    <span>24/7 Support</span>
                </div>
            </div>
        </div>
    </div>
</div>
{%endblock%}