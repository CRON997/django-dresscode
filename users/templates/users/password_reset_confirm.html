{%extends "main/base.html"%}
{%load static%}
{%load i18n%}
{% load widget_tweaks %}

{%block title%}Set New Password{%endblock%}

{%block link%}
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
<link rel="stylesheet" href="{% static 'users/css/password_reset_confirm.css' %}">
{%endblock%}

{%block header%}{%endblock%}
{%block content%}
<div class="wrapper">
    <form id="password-confirm-form" method="POST">
        {%csrf_token%}
        <h1>Set New Password</h1>
        <p class="form-description">Please enter your new password and confirm it below.</p>

        <!-- Success Message -->
        {% if messages %}
        {% for message in messages %}
        {% if message.tags == 'success' %}
        <div class="success-message">
            {{ message }}
        </div>
        {% endif %}
        {% endfor %}
        {% endif %}

        <!-- Error Messages -->
        {% if form.errors or form.non_field_errors %}
        <div class="error-message">
            {% if form.non_field_errors %}
            <p>{{ form.non_field_errors.0 }}</p>
            {% else %}
            <p>Please correct the following errors:</p>
            <ul class="error-list">
                {% for field, errors in form.errors.items %}
                {% for error in errors %}
                <li>{{ error }}</li>
                {% endfor %}
                {% endfor %}
            </ul>
            {% endif %}
        </div>
        {% endif %}

        <!-- New Password Field -->
        <div class="input-box">
            <label for="{{ form.new_password1.id_for_label }}">New Password</label>
            {{ form.new_password1|attr:"placeholder:Enter new password"|attr:"class:form-control" }}
            <i class='bx bx-lock'></i>
            <i class='bx bx-show password-toggle' data-target="{{ form.new_password1.id_for_label }}"></i>

            <!--            <div class="password-requirements">-->
            <!--                <strong>Password must contain:</strong>-->
            <!--                <ul>-->
            <!--                    <li id="req-length" class="requirement-unmet">At least 8 characters</li>-->
            <!--                    <li id="req-uppercase" class="requirement-unmet">One uppercase letter</li>-->
            <!--                    <li id="req-lowercase" class="requirement-unmet">One lowercase letter</li>-->
            <!--                    <li id="req-number" class="requirement-unmet">One number</li>-->
            <!--                    <li id="req-special" class="requirement-unmet">One special character</li>-->
            <!--                </ul>-->
            <!--            </div>-->
        </div>

        <!-- Confirm Password Field -->
        <div class="input-box">
            <label for="{{ form.new_password2.id_for_label }}">Confirm Password</label>
            {{ form.new_password2|attr:"placeholder:Confirm your password"|attr:"class:form-control" }}
            <i class='bx bx-lock'></i>
            <i class='bx bx-show password-toggle' data-target="{{ form.new_password2.id_for_label }}"></i>
        </div>

        <button type="submit" class="btn" id="submit-btn">
            <span class="btn-text">Update Password</span>
        </button>

        <div class="back-to-login">
            <p>Remember your password? <a href="{%url 'users:login'%}">Back to Login</a></p>
        </div>
    </form>
</div>
{%endblock%}
{%block footer%}{%endblock%}